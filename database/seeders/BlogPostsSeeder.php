<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\BlogPost;
use App\Models\BlogCategory;
use App\Models\User;
use Illuminate\Support\Str;
use Carbon\Carbon;

class BlogPostsSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Создаем категории если их нет
        $categories = [
            'Модельный бизнес' => 'modeling-business',
            'Советы моделям' => 'tips-for-models',
            'Индустрия моды' => 'fashion-industry',
            'Кастинги' => 'castings',
            'Красота и стиль' => 'beauty-and-style',
        ];

        $categoryIds = [];
        foreach ($categories as $name => $slug) {
            $category = BlogCategory::firstOrCreate(
                ['slug' => $slug],
                ['name' => $name, 'description' => 'Статьи о ' . mb_strtolower($name)]
            );
            $categoryIds[$slug] = $category->id;
        }

        // Получаем первого админа или создаем пользователя
        $author = User::where('role', 'admin')->first() ?? User::first();

        if (!$author) {
            $author = User::create([
                'name' => 'Редакция Golden Models',
                'email' => 'editor@golden-models.ru',
                'password' => bcrypt('password'),
                'role' => 'admin',
            ]);
        }

        $posts = [
            [
                'category_id' => $categoryIds['modeling-business'],
                'title' => 'Как стать успешной моделью: пошаговое руководство для начинающих',
                'slug' => 'kak-stat-uspeshnoj-modelyu',
                'excerpt' => 'Мечтаете о карьере модели? Узнайте, какие шаги нужно предпринять, чтобы войти в модельную индустрию и добиться успеха.',
                'content' => '<h2>Начало пути в модельном бизнесе</h2>
                <p>Модельный бизнес – это увлекательная, но требовательная индустрия. Успех в ней зависит не только от внешности, но и от профессионализма, дисциплины и упорства.</p>
                
                <h3>1. Оцените свои параметры</h3>
                <p>Первый шаг – честно оценить свои данные. Для женщин-моделей стандартный рост составляет 172-180 см, для мужчин – 185-195 см. Однако существует множество направлений, где эти параметры могут отличаться.</p>
                
                <h3>2. Создайте портфолио</h3>
                <p>Профессиональное портфолио – ваша визитная карточка. Начните с простых фотографий, которые покажут вашу натуральную красоту и потенциал. Постепенно дополняйте его профессиональными снимками.</p>
                
                <h3>3. Найдите надежное агентство</h3>
                <p>Работа через профессиональное модельное агентство – залог безопасности и успешной карьеры. Мы в Golden Models помогаем начинающим моделям сделать первые шаги в индустрии.</p>
                
                <h3>4. Развивайте навыки</h3>
                <p>Посещайте курсы подиумной ходьбы, актерского мастерства, изучайте основы фотопозирования. Чем больше навыков вы освоите, тем более востребованной будете.</p>
                
                <h3>5. Следите за здоровьем</h3>
                <p>Правильное питание, регулярные тренировки, здоровый сон и уход за кожей – обязательные составляющие успешной модельной карьеры.</p>
                
                <p><strong>Помните:</strong> путь к успеху требует времени и усилий. Не сдавайтесь при первых неудачах и продолжайте развиваться!</p>',
                'tags' => ['карьера модели', 'советы', 'начинающим', 'модельный бизнес'],
                'meta_description' => 'Пошаговое руководство для начинающих моделей: как войти в индустрию, создать портфолио и найти агентство',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(2),
                'is_featured' => true,
            ],
            [
                'category_id' => $categoryIds['tips-for-models'],
                'title' => 'Топ-10 ошибок начинающих моделей и как их избежать',
                'slug' => 'top-10-oshibok-nachinayushchih-modelej',
                'excerpt' => 'Разбираем самые распространенные ошибки, которые совершают новички в модельном бизнесе, и делимся советами, как их избежать.',
                'content' => '<h2>Распространенные ошибки новичков</h2>
                <p>Начинающие модели часто совершают одни и те же ошибки. Мы собрали топ-10, чтобы помочь вам избежать их.</p>
                
                <h3>1. Работа без агентства</h3>
                <p>Многие новички пытаются найти работу самостоятельно через социальные сети. Это опасно и малоэффективно. Профессиональное агентство обеспечивает безопасность и легальность сделок.</p>
                
                <h3>2. Слишком много макияжа на фото</h3>
                <p>Для портфолио нужны естественные фотографии. Избыток макияжа скрывает натуральную красоту и может оттолкнуть заказчиков.</p>
                
                <h3>3. Непрофессиональное поведение</h3>
                <p>Опоздания, отмена съемок в последний момент, капризы – все это ставит крест на карьере. Профессионализм и ответственность ценятся превыше всего.</p>
                
                <h3>4. Игнорирование контрактов</h3>
                <p>Всегда читайте договоры перед подписанием. Обращайте внимание на условия оплаты, права на использование изображений и другие важные моменты.</p>
                
                <h3>5. Отсутствие физической подготовки</h3>
                <p>Многочасовые съемки и примерки требуют выносливости. Регулярные тренировки помогут справляться с нагрузками.</p>
                
                <h3>6. Неправильный уход за собой</h3>
                <p>Здоровые волосы, кожа и ногти – это ваш капитал. Не экономьте на качественном уходе.</p>
                
                <h3>7. Сравнение себя с другими</h3>
                <p>Каждая модель уникальна. Вместо того чтобы копировать других, развивайте свою индивидуальность.</p>
                
                <h3>8. Экстремальные диеты</h3>
                <p>Голодание и строгие диеты вредят здоровью. Правильное сбалансированное питание – единственный путь к красивой фигуре.</p>
                
                <h3>9. Отсутствие социальных сетей</h3>
                <p>В современном мире Instagram – важный инструмент продвижения. Создайте профессиональный аккаунт и регулярно обновляйте его.</p>
                
                <h3>10. Завышенные ожидания</h3>
                <p>Успех приходит не сразу. Будьте готовы к долгому пути, полному проб и ошибок.</p>',
                'tags' => ['ошибки моделей', 'советы', 'профессионализм', 'модельная карьера'],
                'meta_description' => 'Узнайте о 10 главных ошибках начинающих моделей и как их избежать для успешной карьеры',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(5),
                'is_featured' => true,
            ],
            [
                'category_id' => $categoryIds['fashion-industry'],
                'title' => 'Тренды модельной индустрии 2025: что нужно знать',
                'slug' => 'trendy-modelnoj-industrii-2025',
                'excerpt' => 'Разбираем главные тренды модельной индустрии в 2025 году: от инклюзивности до цифровых технологий.',
                'content' => '<h2>Модельная индустрия в 2025 году</h2>
                <p>Мир моды постоянно меняется, и 2025 год не исключение. Давайте посмотрим на главные тренды.</p>
                
                <h3>1. Инклюзивность и разнообразие</h3>
                <p>Индустрия моды становится более инклюзивной. Востребованы модели разных возрастов, типов фигур, национальностей и особенностей внешности.</p>
                
                <h3>2. Устойчивая мода</h3>
                <p>Экологичность и осознанное потребление – главные темы современной моды. Модели все чаще становятся амбассадорами эко-брендов.</p>
                
                <h3>3. Цифровые технологии</h3>
                <p>Виртуальные показы, NFT, цифровые модели и AR-примерки – технологии меняют индустрию. Современная модель должна быть готова к работе в цифровом пространстве.</p>
                
                <h3>4. Личный бренд</h3>
                <p>Социальные сети превратили моделей в инфлюенсеров. Наличие активной аудитории и интересного контента стало важным критерием при выборе модели.</p>
                
                <h3>5. Универсальность</h3>
                <p>Модели должны уметь работать в разных жанрах: от подиума до коммерческой съемки, от видео до live-трансляций.</p>
                
                <h3>6. Здоровье и фитнес</h3>
                <p>Акцент смещается с худобы на здоровое подтянутое тело. Фитнес-модели и спортивный стиль жизни в тренде.</p>
                
                <p>Следите за трендами и адаптируйтесь к изменениям – это ключ к успеху в современной индустрии моды!</p>',
                'tags' => ['тренды 2025', 'модная индустрия', 'инклюзивность', 'цифровые технологии'],
                'meta_description' => 'Главные тренды модельной индустрии 2025 года: инклюзивность, экология, цифровые технологии',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(7),
                'is_featured' => true,
            ],
            [
                'category_id' => $categoryIds['castings'],
                'title' => 'Как успешно пройти кастинг: советы от профессионалов',
                'slug' => 'kak-uspeshno-projti-kasting',
                'excerpt' => 'Подготовка к кастингу, поведение на площадке и секреты успешного прохождения отбора от опытных агентов.',
                'content' => '<h2>Подготовка к кастингу</h2>
                <p>Кастинг – это ваш шанс проявить себя. Правильная подготовка увеличивает шансы на успех в несколько раз.</p>
                
                <h3>Перед кастингом</h3>
                <ul>
                <li><strong>Изучите информацию:</strong> узнайте все о проекте, бренде, стиле съемки</li>
                <li><strong>Подготовьте документы:</strong> портфолио, comp-карта, паспорт</li>
                <li><strong>Выберите правильный образ:</strong> минимум макияжа, удобная одежда, чистые волосы</li>
                <li><strong>Выспитесь:</strong> свежий отдохнувший вид критически важен</li>
                </ul>
                
                <h3>На кастинге</h3>
                <ul>
                <li><strong>Приходите вовремя:</strong> лучше на 10-15 минут раньше</li>
                <li><strong>Будьте вежливы:</strong> со всеми – от охраны до директора кастинга</li>
                <li><strong>Слушайте внимательно:</strong> четко выполняйте все указания</li>
                <li><strong>Будьте естественны:</strong> не пытайтесь играть роль, будьте собой</li>
                <li><strong>Улыбайтесь:</strong> позитивный настрой всегда работает в вашу пользу</li>
                </ul>
                
                <h3>Частые вопросы на кастинге</h3>
                <p>Будьте готовы ответить на вопросы о себе, своем опыте, планах. Подготовьте короткий рассказ о себе заранее.</p>
                
                <h3>Типичные задания</h3>
                <ul>
                <li>Представиться и рассказать о себе</li>
                <li>Пройтись по помещению</li>
                <li>Показать эмоции (радость, грусть, удивление)</li>
                <li>Сфотографироваться в разных ракурсах</li>
                <li>Примерить одежду</li>
                </ul>
                
                <h3>После кастинга</h3>
                <p>Не ждите мгновенного ответа. Решение может занять от нескольких часов до нескольких недель. Не звоните и не пишите постоянно – это раздражает.</p>
                
                <p><strong>Главное правило:</strong> даже если вас не выбрали – это опыт. Каждый кастинг делает вас профессиональнее!</p>',
                'tags' => ['кастинг', 'советы моделям', 'подготовка', 'модельная карьера'],
                'meta_description' => 'Полное руководство по успешному прохождению кастинга для моделей: подготовка, поведение, типичные задания',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(10),
                'is_featured' => false,
            ],
            [
                'category_id' => $categoryIds['beauty-and-style'],
                'title' => 'Уход за кожей для моделей: ежедневная рутина красоты',
                'slug' => 'uhod-za-kozhej-dlya-modelej',
                'excerpt' => 'Секреты идеальной кожи от профессиональных моделей: ежедневный уход, профессиональные процедуры и лайфхаки.',
                'content' => '<h2>Идеальная кожа – основа успеха</h2>
                <p>Красивая здоровая кожа – это не только генетика, но и правильный регулярный уход. Делимся секретами моделей.</p>
                
                <h3>Утренняя рутина</h3>
                <ol>
                <li><strong>Очищение:</strong> мягкое умывание теплой водой с гелем или пенкой</li>
                <li><strong>Тонизирование:</strong> тоник восстанавливает pH-баланс кожи</li>
                <li><strong>Увлажнение:</strong> легкий дневной крем с SPF</li>
                <li><strong>Зона вокруг глаз:</strong> специальный крем для деликатной области</li>
                <li><strong>Защита от солнца:</strong> санскрин обязателен даже зимой</li>
                </ol>
                
                <h3>Вечерняя рутина</h3>
                <ol>
                <li><strong>Демакияж:</strong> тщательное удаление косметики мицеллярной водой или гидрофильным маслом</li>
                <li><strong>Двойное очищение:</strong> после демакияжа – умывание с пенкой</li>
                <li><strong>Тонизирование:</strong> подготовка кожи к уходу</li>
                <li><strong>Сыворотка:</strong> активные компоненты для решения конкретных задач</li>
                <li><strong>Ночной крем:</strong> питание и восстановление</li>
                </ol>
                
                <h3>Еженедельный уход</h3>
                <ul>
                <li><strong>Скрабирование:</strong> 1-2 раза в неделю для обновления кожи</li>
                <li><strong>Маски:</strong> увлажняющие, очищающие, питательные – по типу кожи</li>
                <li><strong>Пилинги:</strong> мягкие кислотные пилинги для сияния</li>
                </ul>
                
                <h3>Профессиональный уход</h3>
                <p>Регулярные визиты к косметологу – must have для модели:</p>
                <ul>
                <li>Чистка лица – раз в месяц</li>
                <li>Массаж лица – для тонуса и лимфодренажа</li>
                <li>Уходовые процедуры – по показаниям</li>
                </ul>
                
                <h3>Важные правила</h3>
                <ul>
                <li>Пейте достаточно воды – минимум 2 литра в день</li>
                <li>Высыпайтесь – 7-8 часов сна необходимы</li>
                <li>Правильно питайтесь – кожа отражает состояние организма</li>
                <li>Защищайтесь от солнца – главная причина старения</li>
                <li>Меньше стресса – кортизол разрушает коллаген</li>
                </ul>
                
                <h3>Экстренная помощь</h3>
                <p>Перед важной съемкой:</p>
                <ul>
                <li>Патчи под глаза – снимают отеки</li>
                <li>Тканевая маска – мгновенное увлажнение</li>
                <li>Массаж льдом – для свежести и сияния</li>
                </ul>
                
                <p>Помните: регулярность важнее дорогих средств. Простой, но ежедневный уход даст лучший результат, чем редкие дорогие процедуры!</p>',
                'tags' => ['уход за кожей', 'красота', 'косметология', 'советы моделям'],
                'meta_description' => 'Ежедневная рутина ухода за кожей для моделей: утренний и вечерний уход, профессиональные процедуры',
                'status' => 'published',
                'published_at' => Carbon::now()->subDays(14),
                'is_featured' => false,
            ],
        ];

        foreach ($posts as $postData) {
            $postData['author_id'] = $author->id;
            $postData['read_time'] = ceil(str_word_count(strip_tags($postData['content'])) / 200);
            
            BlogPost::create($postData);
        }

        $this->command->info('5 статей блога успешно добавлено!');
    }
}
